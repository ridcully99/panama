#summary Working example of a tiny guestbook application in 90 lines of code.


== Controller ==
{{{
@Controller(alias="tinyguestbook", defaultAction="list")
public class TinyGuestbookController extends BaseController {

    private static List<Entry> entries = new ArrayList<Entry>();
    private static ListModel model = new SimpleListModel(new ArrayList<Entry>());

    private final static Form form = new Form(Entry.class);

    public TinyGuestbookController() {
        registerTable(new DefaultTable("guestbookentries", model).setSortBy("date", Table.SORT_DESC));
    }

    @Action
    public Target list() {
        return render("guestbook.vm");
    }

    @Action(alias="add")
    public Target addEntry() {
        FormData fd = new FormData(form).withDataFromRequest(context);
        Entry entry = new Entry();
        fd.applyTo(entry);
        entry.setDate(new Date());
        entries.add(entry);
        return redirectToAction("list");
    }

    class Entry {
        public String message;
        public Date date;

        public String getMessage() {
            return message;
        }
        public void setMessage(String message) {
            this.message = message;
        }
        public Date getDate() {
            return date;
        }
        public void setDate(Date date) {
            this.date = date;
        }
    }
}
}}}

== Template ==
{{{
<html>
<head>
    <title>Panama Examples - Tiny Guestbook</title>
</head>
<body>
    <h3>Your comment</h3>
    <form name="fm" method="POST" action="add">
        Add your comment here:<br />
        <textarea name="text">Your comment goes here.</textarea><br />
        <input type="submit" value="Submit" />
    </form>
    <h3>Previous comments</h3>
    <table>
        <tr>
            <th>Date</th>
            <th>Comment</th>
        </tr>
        #foreach($entry in $guestbookentries.rows)
        <tr>
            <td>$entry.date</td>
            <td>$entry.text</td>
        </tr>
        #end
    </table>
</body>
</html>
}}}